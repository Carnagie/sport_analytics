{% extends "base.html" %}

{% block links %}
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static', filename='css/verttakim.css')}}">
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

  <!-- Bootstrap CSS File -->
  <link href="{{ url_for('static', filename='lib/bootstrap/css/bootstrap.min.css')}}" rel="stylesheet">

  <!-- Libraries CSS Files -->
  <link href="{{ url_for('static', filename='lib/font-awesome/css/font-awesome.min.css')}}" rel="stylesheet">
  <link href="{{ url_for('static', filename='lib/animate/animate.min.css')}}" rel="stylesheet">
  <link href="{{ url_for('static', filename='lib/ionicons/css/ionicons.min.css')}}" rel="stylesheet">
  <link href="{{ url_for('static', filename='lib/owlcarousel/assets/owl.carousel.min.css')}}" rel="stylesheet">
  <link href="{{ url_for('static', filename='lib/lightbox/css/lightbox.min.css')}}" rel="stylesheet">
{% endblock %}


{% block content %}

    <div class="main_content">
        <div class="header">Vert Genel Grafikleri </div>

        <div class="info">

        <form action="/verttakim" method="post" autocomplete="off" enctype="multipart/form-data">
        <div class="body_container">

        <div class="control_bar">
            <h1 style="color: black;margin-top: 10px">POLAR / VERT / S. HIZ</h1>
            <h1 style="color: black;margin-top: 10px;margin-left: 40%;">Ölçüm Sonuçları</h1>

            <ul class="control_buttons">
                <li>
                    <input type="radio" name="testType" value="5">
                    <h3 style="margin-left: 5px;color: black;">Polar</h3>
                </li>
                <li>
                    <input type="radio" name="testType" value="4">
                    <h3 style="margin-left: 5px;color: black;">Vert</h3>
                </li>
                <li>
                    <input type="radio" name="testType" value="6">
                    <h3 style="margin-left: 5px;color: black;">S. Hızları</h3>
                </li>
            </ul>

            <ul class="dateList">
                <li>
                    <h3>Başlangıç: </h3>
                    <input type="date" name="startDate">
                </li>
                <li>
                    <h3>Son: </h3>
                    <input type="date" name="endDate">
                </li>
            </ul>

            <ul class="getButton">
                <li>
                     <button type="submit" class="fetchButton">GETİR</button>
                </li>
                <li>
                     <button type="button" id="pdf" class="downloadButton">KAYDET</button>
                </li>
                <li>
                        <input class="uploadButton" type='file' id="imgInp" />
                </li>
            </ul>
        </div>


       <!--==========================
          Portfolio Section
        ============================-->
        <section id="portfolio"  class="section-bg" >
          <div class="container">

            <header class="section-header">
              <h3 class="section-title"></h3>
            </header>

            <div class="row">
              <div class="col-lg-12">
                <ul id="portfolio-flters">
                  <li data-filter="*" class="filter-active">Hepsi</li>
                  {% for f in filterNames %}
                  <li data-filter=".filter-{{f}}">{{f}}</li>
                  {% endfor %}
                </ul>
              </div>
            </div>

            <div class="row portfolio-container">

              {% for ath in jsonProfilDict %}

              <div class="col-lg-4 col-md-6 portfolio-item filter-{{jsonProfilDict[ath]['mevki']}} wow fadeInUp" data-wow-delay="0.1s">
                <div class="portfolio-wrap">
                  <figure>
                    <img src="{{jsonProfilDict[ath]['photo']}}" class="img-fluid" alt="" style="width: 100%;">
                    <a  class="link-preview" title="Düzenle" id="buttonPop2"><i class="ion ion-eye"></i></a>
                    <a  class="link-details" title="İncele" id="buttonPop2_text"><i class="ion ion-android-open"></i></a>
                  </figure>

                  <div class="portfolio-info">
                    <h4><a href="#"> {{ath}} </a></h4>
                    <p>{{jsonProfilDict[ath]['mevki']}}</p>
                    <input type="checkbox" name="pdfTo" value="{{jsonProfilDict[ath]['json']}}">
                  </div>
                </div>
              </div>

              {% endfor %}

            </div>

          </div>
        </section><!-- #portfolio -->

        <div id="topdf" style="width: 100%;">    <input type="text" style="text-align:center;width:41%;font-size:20px;color:black;margin-left: 29%;background-color: inherit;border:none;border-bottom: 2px solid red;" value="  ( {{sdateHTML}} / {{edateHTML}} ) ARASI VERT SONUÇLARI"></div>

        <div class="startPage" id="startPage">
            <ul style="justify-content:center;text-align:center;width: 100%;" >
            <li style="padding: 2%;"><input class="baslikText" type="text"  placeholder="Başlık"></li>
            <li style="padding: 2%;"><input class="baslikText" type="text"  placeholder="Başlık"></li>
            <li style="padding: 2%;">   <!--<img src="static/images/halkbank.jpg"style="max-width: 40vw;">-->

                <form id="form1" runat="server">
                    <img id="blah" src="#" alt="your image" />
                </form>


            </li>
            </ul>
        </div>

        <div class="outputGraphs" id="topdf2">



            <input style="display:none" type="text" name="pageCounter" value="{{outputJson|length}}">

            {% for ath in outputJson %}


            <div id="div{{loop.index}}">

            <h3 style="color:black;margin-left: 43%"> {{ outputJson[ath]['name'] }}</h3>

            <ul class="graphs"0>

                <li>
                                <div style="height: 300px;width: 600px;"><canvas id="canvasVertBar{{loop.index}}"></canvas></div>

                                <script>

                                    var chartColors = {
                                      red: 'rgb(255, 99, 132)',
                                      orange: 'rgb(255, 159, 64)',
                                      yellow: 'rgb(255, 205, 86)',
                                      green: 'rgb(75, 192, 192)',
                                      blue: 'rgb(54, 162, 235)',
                                      purple: 'rgb(153, 102, 255)',
                                      grey: 'rgb(231,233,237)'
                                    };

                                    var randomScalingFactor = function() {
                                      return (Math.random() > 0.5 ? 1.0 : -1.0) * Math.round(Math.random() * 100);
                                    }
                                    var MONTHS = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                                    var config = {
                                      type: 'bar',
                                      data: {
                                        labels: [
                                        {% for k in outputJson[ath]['max']['label'] %}
                                            "{{k}}",
                                        {% endfor %}
                                        ],
                                        datasets: [{
                                          label: "Maximum",
                                          backgroundColor: chartColors.red,
                                          borderColor: chartColors.red,
                                          data: [
                                            {% for k in outputJson[ath]['max']['value'] %}
                                                "{{k}}",
                                            {% endfor %}
                                          ],
                                          fill: false,
                                        }, {
                                          label: "Ortalama",
                                          fill: false,
                                          backgroundColor: chartColors.blue,
                                          borderColor: chartColors.blue,
                                          data: [
                                            {% for k in outputJson[ath]['ort']['value'] %}
                                                "{{k}}",
                                            {% endfor %}
                                          ],
                                        },{
                                          label: "Total",
                                          fill: false,
                                          backgroundColor: chartColors.yellow,
                                          borderColor: chartColors.yellow,
                                          data: [
                                            {% for k in outputJson[ath]['total']['value'] %}
                                                "{{k}}",
                                            {% endfor %}
                                          ],
                                        }]
                                      },
                                      options: {
                                        responsive: true,
                                        title: {
                                          display: true,
                                          text: 'Vert Test Sonuçları'
                                        },
                                        ticks: {
                                          min: 0,
                                          max: 1000
                                        },
                                        tooltips: {
                                          mode: 'label',
                                        },
                                        hover: {
                                          mode: 'nearest',
                                          intersect: true
                                        },
                                        scales: {
                                          xAxes: [{
                                            display: true,
                                            scaleLabel: {
                                              display: true,
                                              labelString: 'Tarihler'
                                            }
                                          }],
                                          yAxes: [{
                                            display: true,
                                            scaleLabel: {
                                              display: true,
                                              labelString: 'Ölçümler (cm)'
                                            }
                                          }]
                                        }
                                      }
                                    };


                                    var ctx = document.getElementById("canvasVertBar{{loop.index}}").getContext("2d");
                                    window.myLine = new Chart(ctx, config);

                                </script>

                </li>

                <li>
                                <div style="height: 300px;width: 600px;"><canvas id="canvasVertLine{{loop.index}}"></canvas></div>

                                <script>

                                    var chartColors = {
                                      red: 'rgb(255, 99, 132)',
                                      orange: 'rgb(255, 159, 64)',
                                      yellow: 'rgb(255, 205, 86)',
                                      green: 'rgb(75, 192, 192)',
                                      blue: 'rgb(54, 162, 235)',
                                      purple: 'rgb(153, 102, 255)',
                                      grey: 'rgb(231,233,237)'
                                    };

                                    var randomScalingFactor = function() {
                                      return (Math.random() > 0.5 ? 1.0 : -1.0) * Math.round(Math.random() * 100);
                                    }
                                    var MONTHS = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                                    var config = {
                                      type: 'line',
                                      data: {
                                        labels: [
                                        {% for k in outputJson[ath]['max']['label'] %}
                                            "{{k}}",
                                        {% endfor %}
                                        ],
                                        datasets: [{
                                          label: "Maximum",
                                          backgroundColor: chartColors.red,
                                          borderColor: chartColors.red,
                                          data: [
                                            {% for k in outputJson[ath]['max']['value'] %}
                                                "{{k}}",
                                            {% endfor %}
                                          ],
                                          fill: false,
                                        }, {
                                          label: "Ortalama",
                                          fill: false,
                                          backgroundColor: chartColors.blue,
                                          borderColor: chartColors.blue,
                                          data: [
                                            {% for k in outputJson[ath]['ort']['value'] %}
                                                "{{k}}",
                                            {% endfor %}
                                          ],
                                        },{
                                          label: "Total",
                                          fill: false,
                                          backgroundColor: chartColors.yellow,
                                          borderColor: chartColors.yellow,
                                          data: [
                                            {% for k in outputJson[ath]['total']['value'] %}
                                                "{{k}}",
                                            {% endfor %}
                                          ],
                                        }]
                                      },
                                      options: {
                                        responsive: true,
                                        title: {
                                          display: true,
                                          text: 'Vert Test Sonuçları'
                                        },
                                        ticks: {
                                          min: 0,
                                          max: 1000
                                        },
                                        tooltips: {
                                          mode: 'label',
                                        },
                                        hover: {
                                          mode: 'nearest',
                                          intersect: true
                                        },
                                        scales: {
                                          xAxes: [{
                                            display: true,
                                            scaleLabel: {
                                              display: true,
                                              labelString: 'Tarihler'
                                            }
                                          }],
                                          yAxes: [{
                                            display: true,
                                            scaleLabel: {
                                              display: true,
                                              labelString: 'Ölçümler (cm)'
                                            }
                                          }]
                                        }
                                      }
                                    };


                                    var ctx = document.getElementById("canvasVertLine{{loop.index}}").getContext("2d");
                                    window.myLine = new Chart(ctx, config);

                                </script>

                </li>

            </ul>


            </div>
            {% endfor %}

        </div>


        </div>
        </form>


    </div>

    </div>

  <script src="{{ url_for('static', filename='lib/jquery/jquery.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/jquery/jquery-migrate.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/easing/easing.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/superfish/hoverIntent.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/superfish/superfish.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/wow/wow.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/waypoints/waypoints.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/counterup/counterup.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/owlcarousel/owl.carousel.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/isotope/isotope.pkgd.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/lightbox/js/lightbox.min.js')}}"></script>
  <script src="{{ url_for('static', filename='lib/touchSwipe/jquery.touchSwipe.min.js')}}"></script>
  <!-- Contact Form JavaScript File -->
  <script src="{{ url_for('static', filename='contactform/contactform.js')}}"></script>
  <script src="https://unpkg.com/ionicons@5.1.2/dist/ionicons.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.0.272/jspdf.debug.js"></script>

<script src="{{ url_for('static', filename='js/html2canvas.js')}}"></script>

  <script src="{{ url_for('static', filename='js/verttakim.js')}}"></script>

{% endblock %}